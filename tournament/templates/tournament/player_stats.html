{% extends 'tournament/base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center mb-4">üèè Player Statistics</h2>

    <!-- Batting Statistics Section -->
    <div class="card mb-5 shadow">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h4 class="mb-0">Top Batters</h4>
        </div>
        <div class="card-body table-responsive">
            <table class="table table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Rank</th>
                        <th>Player</th>
                        <th>Team</th>
                        <th>Matches</th>
                        <th>Runs</th>
                        <th>Average</th>
                        <th>Strike Rate</th>
                        <th>50s / 100s</th>
                        <th>4s / 6s</th>
                    </tr>
                </thead>
                <tbody>
                    {% for player in batting_stats %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td class="d-flex align-items-center">
                            {% if player.photo %}
                                <img src="{{ player.photo.url }}" class="rounded-circle me-2" width="32" height="32" alt="{{ player.name }}">
                            {% else %}
                                <img src="{% static 'img/default_player.png' %}" class="rounded-circle me-2" width="32" height="32" alt="No photo">
                            {% endif %}
                            <a href="{% url 'player_detail' player.id %}" class="text-decoration-none fw-semibold">{{ player.name }}</a>
                        </td>
                        <td>{{ player.team.name }}</td>
                        <td>{{ player.total_matches_bat|default:0 }}</td>
                        <td>{{ player.total_runs_calc|default:0 }}</td>
                        <td>{{ player.batting_avg|floatformat:2|default:"-" }}</td>
                        <td>{{ player.strike_rate_calc|floatformat:2|default:"-" }}</td>
                        <td>{{ player.fifties_count|default:0 }}/{{ player.centuries_count|default:0 }}</td>
                        <td>{{ player.total_fours_calc|default:0 }}/{{ player.total_sixes_calc|default:0 }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="9" class="text-center text-muted">No batting stats available</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Bowling Statistics Section -->
    <div class="card shadow">
        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
            <h4 class="mb-0">Top Bowlers</h4>
        </div>
        <div class="card-body table-responsive">
            <table class="table table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Rank</th>
                        <th>Player</th>
                        <th>Team</th>
                        <th>Matches</th>
                        <th>Wickets</th>
                        <th>Average</th>
                        <th>Economy</th>
                        <th>5W</th>
                    </tr>
                </thead>
                <tbody>
                    {% for player in bowling_stats %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td class="d-flex align-items-center">
                            {% if player.photo %}
                                <img src="{{ player.photo.url }}" class="rounded-circle me-2" width="32" height="32" alt="{{ player.name }}">
                            {% else %}
                                <img src="{% static 'img/default_player.png' %}" class="rounded-circle me-2" width="32" height="32" alt="No photo">
                            {% endif %}
                            <a href="{% url 'player_detail' player.id %}" class="text-decoration-none fw-semibold">{{ player.name }}</a>
                        </td>
                        <td>{{ player.team.name }}</td>
                        <td>{{ player.total_matches_bowl|default:0 }}</td>
                        <td>{{ player.total_wickets_calc|default:0 }}</td>
                        <td>{{ player.bowling_avg|floatformat:2|default:"-" }}</td>
                        <td>{{ player.economy_rate_calc|floatformat:2|default:"-" }}</td>
                        <td>{{ player.five_wickets_count|default:0 }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="8" class="text-center text-muted">No bowling stats available</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
